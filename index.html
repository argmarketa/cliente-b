<!DOCTYPE html>
<html lang="es">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">

  <title>游눑 Imperio Esmeralda | Acceso VIP</title>

  <meta name="facebook-domain-verification" content="qx1zho2wixswe5pr0ill7z3aecxjcp" />

  <link rel="preconnect" href="https://fonts.googleapis.com">
  <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
  <link rel="preload" href="https://fonts.googleapis.com/css2?family=Poppins:wght@400;600;700;900&display=swap" as="style" onload="this.onload=null;this.rel='stylesheet'">
  <noscript><link href="https://fonts.googleapis.com/css2?family=Poppins:wght@400;600;700;900&display=swap" rel="stylesheet"></noscript>

  <link rel="stylesheet" href="estilo.css">
  <link rel="icon" type="image/png" href="img/favicon.png">

  <style>
    * {
      box-sizing: border-box;
    }

    body {
      background: radial-gradient(circle at center, #1a2a33 0%, #0f171e 100%);
      color: white;
      font-family: 'Poppins', sans-serif;
      margin: 0;
      padding: 0;
      display: flex;
      flex-direction: column;
      align-items: center;
      min-height: 100vh;
      text-align: center;
      overflow-x: hidden;
    }
    
    .container {
      width: 90%;
      max-width: 450px;
      padding: 15px 0;
      display: flex;
      flex-direction: column;
      align-items: center;
      justify-content: flex-start;
    }

    /* --- LOGO SUPERIOR --- */
    .brand-header {
      font-size: 1.1rem;
      color: #00ff88;
      font-weight: 800;
      text-transform: uppercase;
      letter-spacing: 1px;
      margin-bottom: 10px;
      text-shadow: 0 0 10px rgba(0, 255, 136, 0.3);
    }

    /* --- FOTO CORREGIDA (NO TAPA EL BOT칍N) --- */
    .hero-image {
      width: 100%;
      max-width: 280px; /* Ancho m치ximo controlado */
      height: auto;
      max-height: 280px; /* ALTO M츼XIMO PARA QUE ENTRE EL BOT칍N */
      object-fit: cover; /* Recorta la foto si sobra, no la estira */
      border-radius: 20px;
      border: 3px solid #00ff88;
      box-shadow: 0 0 25px rgba(0, 255, 136, 0.2);
      margin-bottom: 15px;
      display: block;
    }

    /* --- TEXTOS --- */
    .headline {
      font-size: 1.6rem;
      font-weight: 700;
      line-height: 1.2;
      margin: 5px 0;
    }

    .sub-headline {
      font-size: 0.95rem;
      color: #ccc;
      margin-bottom: 20px;
      line-height: 1.4;
      padding: 0 10px;
    }

    /* --- BOT칍N WHATSAPP --- */
    .popup-button {
      background: #25D366; /* Verde WhatsApp Oficial */
      color: white;
      border: none;
      padding: 16px 20px;
      font-size: 1.1rem;
      font-weight: 800;
      border-radius: 50px;
      cursor: pointer;
      width: 100%;
      display: flex;
      align-items: center;
      justify-content: center;
      gap: 12px; /* Espacio entre texto e icono */
      box-shadow: 0 5px 20px rgba(37, 211, 102, 0.4);
      animation: pulse 2s infinite; /* Latido para llamar la atenci칩n */
      text-transform: uppercase;
      text-decoration: none;
      -webkit-tap-highlight-color: transparent;
      margin-bottom: 15px;
    }

    .popup-button:active {
      transform: scale(0.96);
    }

    /* Icono SVG dentro del bot칩n */
    .btn-icon {
      width: 28px;
      height: 28px;
      fill: white;
    }

    @keyframes pulse {
      0% { box-shadow: 0 0 0 0 rgba(37, 211, 102, 0.7); transform: scale(1); }
      50% { box-shadow: 0 0 0 10px rgba(37, 211, 102, 0); transform: scale(1.02); }
      100% { box-shadow: 0 0 0 0 rgba(37, 211, 102, 0); transform: scale(1); }
    }

    /* --- PRUEBA SOCIAL --- */
    .social-proof {
      font-size: 0.8rem;
      color: #00ff88;
      background: rgba(0, 255, 136, 0.1);
      padding: 5px 15px;
      border-radius: 20px;
      margin-bottom: 25px;
      display: inline-flex;
      align-items: center;
      gap: 6px;
    }
    .dot {
      width: 8px;
      height: 8px;
      background: #00ff88;
      border-radius: 50%;
      animation: blink 1s infinite;
    }
    @keyframes blink { 50% { opacity: 0.4; } }

    /* --- M칄TODOS DE PAGO --- */
    .metodos-pago {
      margin-top: auto; /* Empuja esto al fondo si sobra espacio */
      opacity: 0.7;
      padding-bottom: 20px;
    }
    .metodos-pago p {
      font-size: 0.7rem;
      margin-bottom: 8px;
      letter-spacing: 1px;
    }
    .iconos-pago img {
      height: 22px;
      margin: 0 4px;
      background: white;
      padding: 2px;
      border-radius: 3px;
    }
  </style>

  <script>
    !function(f,b,e,v,n,t,s)
    {if(f.fbq)return;n=f.fbq=function(){n.callMethod?
    n.callMethod.apply(n,arguments):n.queue.push(arguments)};
    if(!f._fbq)f._fbq=n;n.push=n;n.loaded=!0;n.version='2.0';
    n.queue=[];t=b.createElement(e);t.async=!0;
    t.src=v;s=b.getElementsByTagName(e)[0];
    s.parentNode.insertBefore(t,s)}(window, document,'script',
    'https://connect.facebook.net/en_US/fbevents.js');

    fbq('init', '1946841772846486'); 
    fbq('track', 'PageView');
  </script>
</head>

<body>
  
  <div class="container">
    
    <div class="brand-header">
      游눑 IMPERIO ESMERALDA
    </div>

    <img src="img/chica-feliz.jpg" alt="Acceso Listo" class="hero-image">

    <h1 class="headline">
      Tu acceso est치 listo.<br>
      <span style="color: #00ff88;">쮼st치s preparado?</span>
    </h1>

    <p class="sub-headline">
      Hac칠 como miles de personas que ya descubrieron la experiencia. Atenci칩n personalizada y retiros r치pidos. 游녢
    </p>

    <button class="popup-button" id="whatsappButton">
      <svg class="btn-icon" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 16 16">
        <path d="M13.601 2.326A7.854 7.854 0 0 0 7.994 0C3.627 0 .068 3.558.064 7.926c0 1.399.366 2.76 1.057 3.965L0 16l4.204-1.102a7.933 7.933 0 0 0 3.79.965h.004c4.368 0 7.926-3.558 7.93-7.93A7.898 7.898 0 0 0 13.6 2.326zM7.994 14.521a6.573 6.573 0 0 1-3.356-.92l-.24-.144-2.494.654.666-2.433-.156-.251a6.56 6.56 0 0 1-1.007-3.505c0-3.626 2.957-6.584 6.591-6.584a6.56 6.56 0 0 1 4.66 1.931 6.557 6.557 0 0 1 1.928 4.66c-.004 3.639-2.961 6.592-6.592 6.592z"/>
      </svg>
      <span>RECLAMAR MI ACCESO 游꾸</span>
    </button>

    <div class="social-proof">
      <div class="dot"></div>
      <span>+12 personas ingresaron reci칠n</span>
    </div>

    <div class="metodos-pago">
      <p>M칄TODOS SEGUROS:</p>
      <div class="iconos-pago">
        <img src="img/8043680.png" alt="Transferencia">
        <img src="img/Mercado Pago.png" alt="MP">
        <img src="img/logo-cuenta-dni.png" alt="DNI">
      </div>
    </div>

  </div>

  <script>
    // --- 游 CONFIGURACI칍N DE N칔MEROS ROTATIVOS 游 ---
    const WHATSAPP_ROTATOR = [
      "5491178534949",
      "5492233489512",
      "5491178534950",
      "5492233442460",
    ];

    const SHEET_URL = "https://script.google.com/macros/s/AKfycbw9cPNvu9LoUam2EUVzkTFz8P41-qtjiwHTLEvkh9obDU5D2IcNif1Ep4ZjgMZ7CBBG/exec";

    let btn;

    function getCookie(name) {
      const match = document.cookie.match(new RegExp("(^| )" + name + "=([^;]+)"));
      return match ? match[2] : "";
    }

    function setCookie(name, value) {
      document.cookie = `${name}=${value}; path=/; max-age=63072000`;
    }

    function ensureFBP() {
      let fbp = getCookie("_fbp");
      if (!fbp) {
        fbp = `fb.1.${Date.now()}.${Math.floor(Math.random() * 1e10)}`;
        setCookie("_fbp", fbp);
      }
      return fbp;
    }

    function ensureFBC() {
      const fbclid = new URLSearchParams(window.location.search).get("fbclid");
      if (!fbclid) return "";
      const fbc = `fb.1.${Date.now()}.${fbclid}`;
      setCookie("_fbc", fbc);
      return fbc;
    }

    function generateShortID() {
      const chars = "ABCDEFGHJKLMNPQRSTUVWXYZ23456789";
      let id = "";
      for (let i = 0; i < 5; i++) id += chars.charAt(Math.floor(Math.random() * chars.length));
      return id;
    }

    function getOrCreateClickID() {
      const stored = localStorage.getItem("click_id");
      if (stored) return stored;
      const id = generateShortID();
      localStorage.setItem("click_id", id);
      return id;
    }

    function safeSend(payload) {
      try {
        navigator.sendBeacon(SHEET_URL, JSON.stringify(payload));
      } catch (e) {
        fetch(SHEET_URL, {
          method: "POST",
          mode: "no-cors",
          headers: { "Content-Type": "text/plain;charset=UTF-8" },
          body: JSON.stringify(payload)
        });
      }
    }

    async function handleWhatsAppClick(event) {
      event?.preventDefault?.();

      if (btn.disabled) return;

      btn.disabled = true;
      // Peque침o cambio visual al hacer click
      btn.style.opacity = "0.7";
      btn.querySelector("span").textContent = "ABRIENDO WHATSAPP...";

      // 1. CAPTURAR DATOS
      const urlParams = new URLSearchParams(window.location.search);
      const ad_name = urlParams.get('utm_content') || "Organico/Desconocido";
      const campaign_name = urlParams.get('utm_campaign') || "Desconocido";

      const fbp = ensureFBP();
      const fbc = ensureFBC();
      const click_id = getOrCreateClickID();
      const event_id = "contact-" + click_id;
      const timestamp = new Date().toISOString();

      // Disparo del Pixel
      if (typeof fbq !== "undefined") {
        fbq("track", "Contact", {}, { eventID: event_id });
      }

      // 2. ENV칈O AL EXCEL
      safeSend({ click_id, fbp, fbc, event_id, timestamp, ad_name, campaign_name });

      // 3. SELECCI칍N DE WHATSAPP
      const randomIndex = Math.floor(Math.random() * WHATSAPP_ROTATOR.length);
      const selectedNumber = WHATSAPP_ROTATOR[randomIndex];

      // 4. MENSAJE MEJORADO
      const message = `Hola! 游녦 Vi el video y quiero reclamar mi acceso. (C칩d: ${click_id})`;
      
      // Abrir WhatsApp
      window.open(`https://wa.me/${selectedNumber}?text=${encodeURIComponent(message)}`, "_blank");

      setTimeout(() => {
        btn.disabled = false;
        btn.style.opacity = "1";
        btn.querySelector("span").textContent = "RECLAMAR MI ACCESO 游꾸";
      }, 3000);
    }

    document.addEventListener("DOMContentLoaded", () => {
      btn = document.getElementById("whatsappButton");
      btn.addEventListener("click", handleWhatsAppClick);
    });
  </script>

</body>
</html>
